<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Promilek</title>
    <link th:href="@{submit.css}" type="text/css" rel="stylesheet">
    <script src="https://www.google.com/recaptcha/api.js" r></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>

<section>
    <form action="#" enctype="multipart/form-data" th:action="@{/submit}" th:object="${submit}" method="post"
          id="location-form">
        <fieldset>
            <legend>Report a new case</legend>

            <label for="weight">Your weight:</label>
            <input type="number" id="weight" step="0.01" th:field="*{weight}"/>

            <label for="height">Your height:</label>
            <input id="height" type="number" step="0.01" th:field="*{height}"/>

            <label for="age">Your age:</label>
            <input id="age" type="number" step="0.01" th:field="*{age}"/>

            <div class="checks">
                <input type="radio" name="formS" id="male" value="true" onclick="radioValueSex()">
                <label for="male">male</label>

                <input type="radio" name="formS" id="female" value="false" onclick="radioValueSex()">
                <label for="male">female</label>
            </div>

            <p>Insert amount of alcohol and percentage: </p>

            <div class="field_wrapper">
                <div>
                    <input type="number" name="field_name[]" value="" step="0.01"/><input type="number" name="field_percentage[]" value="" step="0.01"/>
                    <a href="javascript:void(0);" class="add_button" title="Add field"><img src="add-icon.png"/></a>
                </div>
            </div>

            <p><input id="amount-of-alcohol" type="hidden" th:field="*{amountOfAlcohol}"/></p>
            <p><input id="metabolysm-parameter" type="hidden" th:field="*{metabolysmParameter}"/></p>
            <p><input id="food-parameter" type="hidden" th:field="*{foodParameter}"/></p>
            <p><input id="sex" type="hidden" th:field="*{sex}"/></p>

            <label for="start-date">Start date:</label>
            <input type="date" id="start-date" name="startdate" th:field="*{startDate}"/>

            <label for="start-time">Start time:</label>
            <input type="time" id="start-time" name="starttime" th:field="*{startTime}">

            <label for="end-date">End date:</label>
            <input type="date" id="end-date" name="enddate" th:field="*{endDate}"/>

            <label for="end-time">Start time:</label>
            <input type="time" id="end-time" name="endtime" th:field="*{endTime}">

            <div class="checks">
                <p>How fast do you burn alcohol?</p>

                <input type="radio" name="formA" id="slowly" value="1">
                <label for="slowly">slowly</label>

                <input type="radio" name="formA" id="normally" value="2">
                <label for="normally">normally</label>

                <input type="radio" name="formA" id="quickly" value="3">
                <label for="quickly">quickly</label>
            </div>

            <div class="checks">
                <p>How much did you eat before drinking?</p>

                <input type="radio" name="formF" id="nothing" value="1">
                <label for="slowly">nothing</label>

                <input type="radio" name="formF" id="some-food" value="2">
                <label for="normally">normally</label>

                <input type="radio" name="formF" id="a lot food" value="3">
                <label for="quickly">a lot</label>
            </div>

            <p><input type="submit" value="Submit" onclick="calculateAlcoholKGrams(), callAll()"/>
                <input type="reset" value="Reset"/></p>
            <!--            <div class="g-recaptcha" data-sitekey="6LepSVIcAAAAAAe3o78Oa6KdH7ii0Xd_IKbWVj5b"></div>-->
        </fieldset>
    </form>
</section>
<section>
    <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for names..">

    <ul id="myUL">
        <li><a href="#">Adele</a></li>
        <li><a href="#">Agnes</a></li>

        <li><a href="#">Billy</a></li>
        <li><a href="#">Bob</a></li>

        <li><a href="#">Calvin</a></li>
        <li><a href="#">Christina</a></li>
        <li><a href="#">Cindy</a></li>
    </ul>
</section>
</body>
<script>

    $(document).ready(function () {
        var maxField = 15; //Input fields increment limitation
        var addButton = $('.add_button'); //Add button selector
        var wrapper = $('.field_wrapper'); //Input field wrapper
        var fieldHTML = '<div><input type="number" name="field_name[]" value="" step="0.01"/><input type="number" name="field_percentage[]" value="" step="0.01"/><a href="javascript:void(0);" class="remove_button"><img src="remove-icon.png"/></a></div>'; //New input field html
        var x = 1; //Initial field counter is 1

        //Once add button is clicked
        $(addButton).click(function () {
            //Check maximum number of input fields
            if (x < maxField) {
                x++; //Increment field counter
                $(wrapper).append(fieldHTML); //Add field html
            }
        });

        //Once remove button is clicked
        $(wrapper).on('click', '.remove_button', function (e) {
            e.preventDefault();
            $(this).parent('div').remove(); //Remove field html
            x--; //Decrement field counter
        });
    });

    function callAll(){
        radioValueAlcoholMetabolysm();
        radioValueFoodParameter();
        radioValueSex();
    }

    function radioValueAlcoholMetabolysm() {
        var ele = document.getElementsByName('formA');

        for (i = 0; i < ele.length; i++) {
            if (ele[i].checked)
                document.getElementById("metabolysm-parameter").value = ele[i].value;
        }
    }

    function radioValueFoodParameter() {
        var ele = document.getElementsByName('formF');

        for (let i = 0; i < ele.length; i++) {
            if (ele[i].checked)
                document.getElementById("food-parameter").value = ele[i].value;
        }
    }

    function radioValueSex() {
        var ele = document.getElementsByName('formS');

        for (let i = 0; i < ele.length; i++) {
            if (ele[i].checked)
                document.getElementById("sex").value = ele[i].value;
        }
    }

    function calculateAlcoholKGrams() {
        var sum = 0;
        var ele = document.getElementsByName('field_name[]');
        var ele1 = document.getElementsByName('field_percentage[]')
        for (let i = 0; i < ele.length; i++) {
            sum += ele[i].value * ele1[i].value/100;
        }
        document.getElementById("amount-of-alcohol").value = sum;
    }
</script>
<script>
    function myFunction() {
        // Declare variables
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById('myInput');
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL");
        li = ul.getElementsByTagName('li');

        // Loop through all list items, and hide those who don't match the search query
        for (i = 0; i < li.length; i++) {
            a = li[i].getElementsByTagName("a")[0];
            txtValue = a.textContent || a.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
            } else {
                li[i].style.display = "none";
            }
        }
    }
</script>
</html>